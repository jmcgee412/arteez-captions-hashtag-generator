:root {
    /* Tech Dark Theme Palette */
    --bg-primary: #12121f; /* Deep dark blue/purple */
    --bg-secondary: #1a1a2e; /* Slightly lighter dark blue */
    --bg-card: #1f1f35; /* Card background */
    --text-primary: #e0e0ff; /* Light lavender/white */
    --text-secondary: #a0a0c0; /* Muted lavender/grey */
    --accent-primary: #00f5c3; /* Neon Teal/Green */
    --accent-primary-dark: #00d1a7;
    --accent-secondary: #ff4dff; /* Neon Pink/Magenta */
    --accent-secondary-dark: #e600e6;
    --border-color: #303050; /* Dark border */
    --success-color: #00f5c3; /* Use accent for success */
    --success-color-dark: #00d1a7;
    --info-color: var(--accent-secondary); /* Use accent for info */
    --info-color-dark: var(--accent-secondary-dark);
    --white-color: #ffffff;
    --danger-color: #ff4d4d;

    --border-radius: 6px;
    --box-shadow-light: 0 4px 15px rgba(0, 245, 195, 0.1); /* Subtle accent glow */
    --box-shadow-strong: 0 6px 25px rgba(0, 245, 195, 0.2);
    --font-family-base: 'Inter', sans-serif;
    --spacing-unit: 1rem; /* 16px */

    /* Glassmorphism effect (optional, use carefully) */
    --backdrop-blur: blur(10px);
    --bg-glass: rgba(31, 31, 53, 0.7); /* Semi-transparent card bg */
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-family-base);
    line-height: 1.6;
    background-color: var(--bg-primary);
    /* Optional: Add a subtle gradient or noise texture */
    background-image: radial-gradient(circle at top center, var(--bg-secondary) 0%, var(--bg-primary) 70%);
    color: var(--text-primary);
    padding: calc(var(--spacing-unit) * 1.5); /* 24px */
}

.container {
    max-width: 1140px;
    margin: auto;
    background: transparent; /* Container is just for layout */
    padding: 0;
    border-radius: 0;
    box-shadow: none;
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 1.5); /* 24px */
}

.app-header {
    text-align: center;
    margin-bottom: var(--spacing-unit);
}

.app-header h1 {
    font-size: 2.5rem; /* Slightly larger */
    font-weight: 700;
    color: var(--white-color);
    margin-bottom: 0; /* Removed subtitle, no margin needed */
     /* Subtle text shadow for depth */
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

section {
    margin-bottom: 0; /* Using gap in container */
    padding: 0; /* Padding handled by card */
    border-bottom: none; /* Using card separation */
}

section.card {
    background-color: var(--bg-card);
    /* Optional Glassmorphism:
     background-color: var(--bg-glass);
     backdrop-filter: var(--backdrop-blur);
     -webkit-backdrop-filter: var(--backdrop-blur);
    */
    padding: calc(var(--spacing-unit) * 1.5); /* 24px */
    border-radius: calc(var(--border-radius) * 1.5); /* Slightly larger radius */
    box-shadow: var(--box-shadow-light);
    border: 1px solid var(--border-color);
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

section.card:hover {
    border-color: rgba(0, 245, 195, 0.3); /* Accent border on hover */
    box-shadow: var(--box-shadow-strong);
}

section.collapsible-section {
    /*padding: 0; /* Remove padding from section, apply to header/content */
}
section.collapsible-section.card {
     overflow: hidden; /* Prevent content overflow when collapsed */
}

section h2 {
    font-size: 1.5rem; /* 24px */
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-unit); /* 16px */
    padding-bottom: calc(var(--spacing-unit) * 0.75); /* 12px */
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 0.75); /* 12px */
}

.collapsible-header {
    /*padding: calc(var(--spacing-unit) * 1.5); /* Apply padding here */
    margin-bottom: 0; /* Remove bottom margin */
    border-bottom: 1px solid var(--border-color); /* Keep border */
    cursor: pointer;
    display: flex;
    /*justify-content: space-between; /* Push icon to the right */
    align-items: center;
    transition: background-color 0.3s ease;
    gap: 12px;
}

/* Adjust border and paddding for Custom Hashtags section */
#custom-hashtags-section .collapsible-header {
  border-bottom: none;    /* remove the line */
  padding-bottom: 0;      /* kill the 12px h2 padding */
  margin-bottom: 0;       /* kill any bottom margin */
}

.collapsible-header:hover {
  /*  background-color: rgba(255, 255, 255, 0.03); /* Subtle hover effect */
}

.collapsible-header .step-number {
    margin-right: calc(var(--spacing-unit) * 0.75); /* Add gap */
    flex-shrink: 0;
}
.collapsible-header > span:not(.step-number) {
    flex-grow: 1;
    margin-right: var(--spacing-unit); /* Space before icon */
}

.hidden {
  display: none;
}

.platform-reset-desktop {
  display: none;
}

/* Show desktop button only if section is expanded */
.collapsible-section.expanded .platform-reset-desktop {
  display: inline-block;
}

/* Hide mobile reset button by default */
.platform-reset-mobile {
  display: none;
}

.collapse-icon {
    width: 24px;
    height: 24px;
    stroke: var(--text-secondary);
    transition: transform 0.3s ease, stroke 0.3s ease;
    flex-shrink: 0;
}
.collapsible-header:hover .collapse-icon {
    stroke: var(--accent-primary);
}
.collapsible-section.expanded .collapse-icon {
    transform: rotate(180deg);
}

.collapsible-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease-out, padding 0.4s ease-out;
    padding: 0 calc(var(--spacing-unit) * 1.5); /* Horizontal padding matches header */
    background-color: var(--bg-card); /* Match card background */
    border-top: none; /* Header provides top border */
}

.collapsible-section.expanded .collapsible-content {
    max-height: 3000px; /* Arbitrary large height */
    padding: calc(var(--spacing-unit) * 1.5); /* Restore padding when expanded */
    /*border-top: 1px solid var(--border-color); /* Add separator */
    transition: max-height 0.5s ease-in, padding 0.5s ease-in;
}

.step-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px; /* Larger */
    height: 32px; /* Larger */
    background-color: var(--accent-primary);
    color: var(--bg-primary); /* Dark text on bright bg */
    font-size: 0.9rem; /* 14.4px */
    font-weight: 700;
    border-radius: 50%;
    flex-shrink: 0;
    box-shadow: 0 0 10px rgba(0, 245, 195, 0.5); /* Glow */
}

button {
    padding: calc(var(--spacing-unit) * 0.65) calc(var(--spacing-unit) * 1.2); /* ~10px 19px */
    border: 1px solid var(--border-color);
    background-color: rgba(255, 255, 255, 0.05); /* Subtle background */
    color: var(--text-secondary);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9375rem; /* 15px */
    font-weight: 500;
    /* display: inline-flex; */
    align-items: center;
    gap: calc(var(--spacing-unit) * 0.4); /* ~6px */
    line-height: 1.4;
}

button:hover {
    background-color: rgba(0, 245, 195, .1); /* Accent hover bg */
    border-color: var(--accent-primary);
    color: var(--accent-primary);
    box-shadow: 0 0 8px rgba(0, 245, 195, 0.3);
}

button:focus-visible {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 3px rgba(0, 245, 195, 0.4);
}

button.active {
    background-color: var(--accent-primary);
    color: var(--bg-primary); /* Dark text */
    border-color: var(--accent-primary);
    box-shadow: 0 0 10px rgba(0, 245, 195, 0.5);
}

button.active:hover {
    background-color: var(--accent-primary-dark);
    border-color: var(--accent-primary-dark);
    box-shadow: 0 0 15px rgba(0, 245, 195, 0.7);
}

.button-row {
    display: flex;
    flex-wrap: wrap;
    gap: calc(var(--spacing-unit) * 0.75); /* 12px */
}

.button-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: calc(var(--spacing-unit) * 0.75); /* 12px */
}

.settings-section h2 {
    /*margin-bottom: 20;*/
    border-bottom: none;
    padding-bottom: 0;
}

.platform-settings {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-unit); /* 16px */
}

.platform-card {
    border: 1px solid var(--border-color);
    padding: var(--spacing-unit); /* 16px */
    border-radius: var(--border-radius);
    background-color: rgba(18, 18, 31, 0.7); /* Slightly darker nested card */
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

.platform-card:hover {
    border-color: rgba(255, 77, 255, 0.4); /* Secondary accent hover border */
    box-shadow: 0 2px 10px rgba(31, 31, 53, 0.5);
}

.platform-card h3 {
    margin-top: 0;
    margin-bottom: var(--spacing-unit); /* 16px */
    font-size: 1.125rem; /* 18px */
    font-weight: 600;
    color: var(--accent-secondary); /* Use secondary accent for platform names */
    text-shadow: 0 0 8px rgba(255, 77, 255, 0.5);
}

.setting {
    margin-bottom: calc(var(--spacing-unit) * 0.75); /* 12px */
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-unit);
}

.setting:last-child {
    margin-bottom: 0;
}

.setting label {
    font-size: 0.875rem; /* 14px */
    color: var(--text-secondary);
    flex-shrink: 0;
}

.setting input[type="number"] {
    width: 70px; /* Fixed width for number inputs */
    padding: calc(var(--spacing-unit) * 0.4) calc(var(--spacing-unit) * 0.6); /* ~6px 10px */
    border: 1px solid var(--border-color);
    border-radius: calc(var(--border-radius) * 0.8); /* Slightly smaller radius */
    text-align: right;
    font-size: 0.9375rem; /* 15px */
    font-family: inherit;
    background-color: var(--bg-primary); /* Dark input bg */
    color: var(--text-primary); /* Light input text */
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.setting input[type="number"]:focus {
    border-color: var(--accent-primary);
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 245, 195, 0.3);
}

input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield; /* Firefox */
}

.setting.total-setting span {
  display: inline-block;
  min-width: 60px;
  text-align: right;
  font-weight: 600;
  padding-right: 8px;
}

.actions-section {
    text-align: center;
    padding: var(--spacing-unit) 0; /* Add some spacing */
    background: none;
    box-shadow: none;
    border: none;
}

.action-btn.generate {
    padding: calc(var(--spacing-unit) * 0.9) calc(var(--spacing-unit) * 2.5); /* ~14px 40px */
    font-size: 1.3rem; /* 21px */
    font-weight: 700; /* Bolder */
    background: linear-gradient(45deg, var(--accent-primary), var(--accent-secondary));
    color: var(--bg-primary); /* Dark text on gradient */
    border: none; /* Remove border for gradient button */
    cursor: pointer;
    gap: calc(var(--spacing-unit) * 0.6); /* 10px */
    box-shadow: 0 5px 15px rgba(0, 245, 195, 0.3), 0 5px 15px rgba(255, 77, 255, 0.3);
    transition: all 0.3s ease;
}

.action-btn.generate:hover {
    background: linear-gradient(45deg, var(--accent-primary-dark), var(--accent-secondary-dark));
    box-shadow: 0 8px 25px rgba(0, 245, 195, 0.5), 0 8px 25px rgba(255, 77, 255, 0.5);
    transform: translateY(-2px); /* Slight lift */
}
.action-btn.generate:active {
     transform: translateY(0px);
     box-shadow: 0 3px 10px rgba(0, 245, 195, 0.2), 0 3px 10px rgba(255, 77, 255, 0.2);
}

.action-btn.generate svg {
    margin-bottom: -3px; /* Align icon better */
    filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.5)); /* Icon shadow */
}

.content-management {
    padding: calc(var(--spacing-unit) * 1.5);
}

.content-management h2 {
    margin-bottom: var(--spacing-unit); /* 16px */
    padding-bottom: calc(var(--spacing-unit) * 0.75);
    border-bottom: 1px solid var(--border-color);
}

.management-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: calc(var(--spacing-unit) * 0.75); /* 12px */
    align-items: center;
}

.management-btn {
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--text-secondary);
    border-color: var(--border-color);
    font-weight: 500;
}

.management-btn svg {
    width: 16px;
    height: 16px;
    stroke-width: 2px; /* Slightly thinner */
    color: var(--text-secondary);
    transition: color 0.3s ease, transform 0.3s ease;
}

.management-btn:hover {
    background-color: rgba(255, 77, 255, 0.1); /* Secondary accent hover */
    border-color: var(--accent-secondary);
    color: var(--accent-secondary);
}

.management-btn:hover svg {
    color: var(--accent-secondary);
    transform: scale(1.1);
}

.output-section {
    background: none;
    padding: 0;
    border: none;
    box-shadow: none;
}

.output-section h2 {
    margin-bottom: 0; /* Connected to output area */
    border-bottom: none;
    padding: calc(var(--spacing-unit) * 1.2) calc(var(--spacing-unit) * 1.5); /* 19px 24px */
    background-color: var(--bg-card); /* Match card bg */
    border-radius: calc(var(--border-radius) * 1.5) calc(var(--border-radius) * 1.5) 0 0; /* Round top corners */
    box-shadow: var(--box-shadow-light);
    border: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color); /* Keep border between title and content */
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 0.75); /* 12px */
    color: var(--text-primary); /* Ensure title text color is correct */
}

#output-area {
    margin-top: 0; /* Connected to h2 */
    background-color: var(--bg-card);
    padding: calc(var(--spacing-unit) * 1.5); /* 24px */
    border-radius: 0 0 calc(var(--border-radius) * 1.5) calc(var(--border-radius) * 1.5); /* Round bottom corners */
    border: 1px solid var(--border-color);
    border-top: none; /* Remove top border */
    min-height: 100px;
    box-shadow: var(--box-shadow-light);
}

.output-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-unit); /* 16px */
}

.output-platform {
    margin-bottom: 0; /* Using grid gap */
    padding: 0;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    background-color: rgba(18, 18, 31, 0.7); /* Darker nested card */
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Ensure content stays within rounded corners */
    transition: border-color 0.3s ease;
}
.output-platform:hover {
    border-color: var(--accent-primary);
}

.output-platform h4 {
    margin: 0;
    padding: calc(var(--spacing-unit) * 0.75) var(--spacing-unit); /* 12px 16px */
    font-size: 1.1rem; /* Slightly smaller */
    font-weight: 600;
    color: var(--accent-primary); /* Primary accent for platform title */
    border-bottom: 1px solid var(--border-color);
    background-color: rgba(0,0,0,0.1); /* Slightly darker header */
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.output-content {
    background-color: transparent;
    padding: var(--spacing-unit); /* 16px */
    border: none;
    border-radius: 0;
    margin-bottom: 0;
    white-space: pre-wrap;
    word-wrap: break-word;
    flex-grow: 1; /* Take remaining space */
    font-size: 0.9375rem; /* 15px */
    color: var(--text-primary); /* Ensure text is readable */
}

.output-caption {
    font-style: normal;
    margin-bottom: calc(var(--spacing-unit) * 0.75); /* 12px */
    color: var(--text-primary);
    line-height: 1.5;

    font-size: 0.900rem;
}

.output-hashtags {
    color: var(--text-secondary); /* Muted color for hashtags */
    font-size: 0.875rem; /* 14px */
    line-height: 1.6;
    word-spacing: 0.5em;
}

.copy-btn {
    padding: calc(var(--spacing-unit) * 0.3) calc(var(--spacing-unit) * 0.7); /* ~5px 11px */
    font-size: 0.8125rem; /* 13px */
    background-color: var(--accent-secondary); /* Secondary accent */
    color: var(--bg-primary); /* Dark text */
    border: none;
    float: none;
    margin-left: 0;
    line-height: 1;
    font-weight: 600; /* Bolder copy button text */
    box-shadow: 0 0 8px rgba(255, 77, 255, 0.4);
    transition: all 0.2s ease;
}

.copy-btn svg {
    width: 14px;
    height: 14px;
    stroke-width: 2.5px;
    stroke: var(--bg-primary); /* Match text color */
}

.copy-btn.copied {
    background-color: var(--success-color); /* Primary accent for success */
    box-shadow: 0 0 8px rgba(0, 245, 195, 0.5);
}
.copy-btn.copied svg {
    stroke: var(--bg-primary);
}

.copy-btn:hover {
    background-color: var(--accent-secondary-dark);
    box-shadow: 0 0 12px rgba(255, 77, 255, 0.6);
    transform: scale(1.05);
}

.copy-btn.copied:hover {
    background-color: var(--success-color-dark);
    box-shadow: 0 0 12px rgba(0, 245, 195, 0.7);
}

.custom-hashtags-input-area {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 0.5); /* 8px */
    margin-bottom: var(--spacing-unit); /* Add space below textarea */
}

.custom-hashtags-input-area textarea {
    width: 100%;
    padding: calc(var(--spacing-unit) * 0.6) calc(var(--spacing-unit) * 0.8); /* ~10px 13px */
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    font-family: inherit;
    font-size: 0.9375rem; /* 15px */
    background-color: var(--bg-primary); /* Dark input bg */
    color: var(--text-primary); /* Light input text */
    resize: vertical; /* Allow vertical resize */
    min-height: 60px;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    line-height: 1.5;
}

.custom-hashtags-input-area textarea:focus {
    border-color: var(--accent-primary);
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 245, 195, 0.3);
}

.custom-hashtags-input-area small {
    font-size: 0.8125rem; /* 13px */
    color: var(--text-secondary);
}

.custom-hashtags-exclusion {
    margin-top: var(--spacing-unit); /* Space above exclusion section */
}

.custom-hashtags-exclusion > label {
    display: block;
    font-size: 0.875rem; /* 14px */
    color: var(--text-secondary);
    margin-bottom: calc(var(--spacing-unit) * 0.75); /* 12px */
    font-weight: 500;
}

.platform-checkbox-container {
    display: flex;
    flex-wrap: wrap;
    gap: calc(var(--spacing-unit) * 0.8) calc(var(--spacing-unit) * 1.2); /* Adjust gap */
}

.platform-checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 0.4); /* 6px */
}

.platform-checkbox-wrapper input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    position: relative;
    background-color: var(--bg-primary);
    transition: background-color 0.2s ease, border-color 0.2s ease;
}

.platform-checkbox-wrapper input[type="checkbox"]:hover {
    border-color: var(--accent-primary);
}

.platform-checkbox-wrapper input[type="checkbox"]:checked {
    background-color: var(--accent-primary);
    border-color: var(--accent-primary);
}

.platform-checkbox-wrapper input[type="checkbox"]:checked::before {
    content: '';
    display: block;
    position: absolute;
    top: 2px;
    left: 5px;
    width: 5px;
    height: 10px;
    border: solid var(--bg-primary); /* Checkmark color */
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

.platform-checkbox-wrapper label {
    font-size: 0.875rem; /* 14px */
    color: var(--text-primary);
    cursor: pointer;
    user-select: none; /* Prevent text selection on label click */
}

body.modal-open {
    overflow: hidden; /* Prevent background scrolling when modal is open */
}

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(18, 18, 31, 0.85); /* Dark semi-transparent overlay */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0s linear 0.3s;
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
}

.modal-overlay.modal-open {
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s ease;
}

.modal-content {
    background-color: var(--bg-card);
    padding: calc(var(--spacing-unit) * 2); /* 32px */
    border-radius: var(--border-radius);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    border: 1px solid var(--border-color);
    max-width: 95%;
    width: 800px; /* Wider modal for table */
    max-height: 80vh; /* Limit height and allow scrolling within modal */
    overflow-y: auto;
    position: relative;
    transform: scale(0.95);
    transition: transform 0.3s ease;
}

.modal-overlay.modal-open .modal-content {
    transform: scale(1);
}

.modal-title {
    font-size: 1.4rem; /* 22px */
    font-weight: 600;
    color: var(--accent-primary);
    margin: 0 0 calc(var(--spacing-unit) * 1.2); /* 0 0 19px */
    padding-bottom: var(--spacing-unit); /* 16px */
    border-bottom: 1px solid var(--border-color);
}

.modal-close-btn {
    position: absolute;
    top: calc(var(--spacing-unit) * 0.8); /* 13px */
    right: calc(var(--spacing-unit) * 0.8); /* 13px */
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 2rem; /* 32px */
    line-height: 1;
    padding: 0;
    cursor: pointer;
    transition: color 0.2s ease, transform 0.2s ease;
    width: 30px;
    height: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
}

.modal-close-btn:hover {
    color: var(--danger-color);
    transform: rotate(90deg);
    background-color: rgba(255, 77, 77, 0.1);
}

.modal-body {
    font-size: 0.9375rem; /* 15px */
    color: var(--text-primary);
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-unit); /* Space between filters and table */
}

.caption-filters,
.hashtag-filters {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-unit);
    padding-bottom: var(--spacing-unit);
    border-bottom: 1px solid var(--border-color);
    margin-bottom: var(--spacing-unit); /* Space below filters */
}

.filter-group {
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 0.5);
}

.filter-group label {
    font-size: 0.875rem; /* 14px */
    color: var(--text-secondary);
    font-weight: 500;
    flex-shrink: 0; /* Prevent labels from shrinking */
}

.filter-group select,
.filter-group input[type="number"] { /* Style number input like select */
    padding: calc(var(--spacing-unit) * 0.4) calc(var(--spacing-unit) * 0.6);
    border: 1px solid var(--border-color);
    border-radius: calc(var(--border-radius) * 0.8);
    font-size: 0.875rem; /* 14px */
    font-family: inherit;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    cursor: pointer;
    /* min-width: 150px; */ /* Remove fixed min-width for flexibility */
    flex-grow: 1; /* Allow filter inputs to grow */
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.filter-group input[type="number"] {
    max-width: 100px; /* Limit width of number input */
    text-align: right;
    flex-grow: 0; /* Don't let number input grow excessively */
    cursor: text; /* Use text cursor for input */
}

.filter-group select:focus,
.filter-group input[type="number"]:focus {
    border-color: var(--accent-secondary); /* Use secondary accent for filters */
    outline: none;
    box-shadow: 0 0 0 3px rgba(255, 77, 255, 0.3);
}

.caption-table-container,
.hashtag-table-container {
    width: 100%;
    overflow-x: auto; /* Allow horizontal scrolling if needed */
    max-height: 50vh; /* Limit table height within modal */
    overflow-y: auto; /* Allow vertical scrolling for table body */
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    background-color: rgba(18, 18, 31, 0.5); /* Slightly different bg for table area */
    position: relative;
}

#captions-table,
#hashtags-table {
    width: 100%;
    border-collapse: collapse;
    /* table-layout: fixed; */ /* Let table layout adjust, might be better for varying caption lengths */
}

#captions-table th, #captions-table td,
#hashtags-table th, #hashtags-table td {
    padding: calc(var(--spacing-unit) * 0.6) var(--spacing-unit); /* ~10px 16px */
    text-align: left;
    border-bottom: 1px solid var(--border-color);
    font-size: 0.875rem; /* 14px */
    word-wrap: break-word; /* Wrap long text within cells */
    vertical-align: top; /* Align content to top */
}

#captions-table th,
#hashtags-table th {
    background-color: #12121f;
    color: var(--accent-secondary); /* Secondary accent for headers */
    font-weight: 600;
    position: sticky; /* Make header sticky */
    top: 0; /* Stick to the top of the container */
    z-index: 2; /* Ensure header is above scrolling content */
}

#captions-table td,
#hashtags-table td {
    color: var(--text-primary);
}

#captions-table tbody tr:nth-child(even),
#hashtags-table tbody tr:nth-child(even) {
    background-color: rgba(255, 255, 255, 0.02); /* Subtle striping */
}

#captions-table tbody tr:hover,
#hashtags-table tbody tr:hover {
    background-color: rgba(0, 245, 195, 0.08); /* Accent hover */
}

#captions-table td.no-results,
#hashtags-table td.no-results {
    text-align: center;
    color: var(--text-secondary);
    font-style: italic;
    padding: var(--spacing-unit);
    vertical-align: middle;
}

#captions-table th.col-caption { width: 45%; }
#captions-table th.col-identifiers { width: 25%; }
#captions-table th.col-platforms { width: 20%; }
#captions-table th.col-char-total { width: 10%; }

#hashtags-table th:nth-child(1) { width: 25%; } /* Hashtag */
#hashtags-table th:nth-child(2) { width: 30%; } /* Identifiers */
#hashtags-table th:nth-child(3) { width: 30%; } /* Platforms */
#hashtags-table th:nth-child(4) { width: 15%; } /* Type */

.modal-body ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.modal-body li {
    background-color: transparent;
    padding: 0;
    margin-bottom: 0;
    border-radius: 0;
    border: none;
}

.add-captions-modal-content {
    width: 600px; /* Slightly smaller modal */
    max-height: 90vh;
}

.add-captions-modal-body {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 1.5); /* Increased gap */
}

.add-captions-section {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 0.75);
}

.add-captions-section > label,
.add-hashtags-section > label { /* Also style labels in add hashtags modal */
    font-weight: 600;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

#add-captions-platform-btns {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* Adjust grid for platform buttons */
}

#add-captions-platform-btns .platform-btn {
    border-color: var(--border-color);
    color: var(--text-secondary);
}

#add-captions-platform-btns .platform-btn.active {
    background-color: var(--accent-secondary); /* Use secondary accent for platform selection */
    color: var(--bg-primary);
    border-color: var(--accent-secondary);
    box-shadow: 0 0 8px rgba(255, 77, 255, 0.4);
}
#add-captions-platform-btns .platform-btn.active:hover {
    background-color: var(--accent-secondary-dark);
    border-color: var(--accent-secondary-dark);
}

#add-captions-input-area {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-unit); /* Space between textareas */
    max-height: 35vh; /* Limit height and allow scroll */
    overflow-y: auto;
    padding-right: 10px; /* Add some padding for scrollbar */
     border: 1px solid var(--border-color);
     border-radius: var(--border-radius);
     padding: var(--spacing-unit);
     background-color: rgba(18, 18, 31, 0.5);
}

.caption-input-wrapper {
    display: flex;
    align-items: flex-start; /* Align button to top */
    gap: calc(var(--spacing-unit) * 0.5);
}

.caption-input {
    flex-grow: 1; /* Textarea takes most space */
    width: 100%; /* Needed for flex-grow to work properly */
    padding: calc(var(--spacing-unit) * 0.6) calc(var(--spacing-unit) * 0.8);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    font-family: inherit;
    font-size: 0.9375rem;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    resize: vertical;
    min-height: 60px;
    line-height: 1.5;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.caption-input:focus {
    border-color: var(--accent-primary);
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 245, 195, 0.3);
}

.remove-caption-btn {
    background: none;
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    font-size: 1.5rem;
    line-height: 1;
    padding: 0;
    cursor: pointer;
    transition: color 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
    width: 28px;
    height: 28px;
    flex-shrink: 0;
    border-radius: 50%;
    margin-top: calc(var(--spacing-unit) * 0.6); /* Align roughly with textarea padding */
    display: flex;
    justify-content: center;
    align-items: center;
}

.remove-caption-btn:hover {
    color: var(--danger-color);
    background-color: rgba(255, 77, 77, 0.1);
    border-color: var(--danger-color);
}

/* Hide remove button for the first caption input */
#add-captions-input-area .caption-input-wrapper:first-child .remove-caption-btn {
    display: none;
}

.add-another-btn {
    align-self: flex-start; /* Align button to the left */
    margin-top: calc(var(--spacing-unit) * 0.5); /* Add some space above */
}

.add-hashtags-modal-content {
     width: 700px; /* Slightly wider for more button grids */
     max-height: 90vh;
}

.add-hashtags-modal-body {
     display: flex;
     flex-direction: column;
     gap: calc(var(--spacing-unit) * 1.5); /* Consistent gap */
}

.add-hashtags-section {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 0.75);
}

#add-hashtags-category-btns {
    /* Uses button-row default */
}

#add-hashtags-tags-btns {
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
}
#add-hashtags-platform-btns {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
}
#add-hashtags-type-btns {
     /* Uses button-row default */
}

#add-hashtags-category-btns .category-btn.active,
#add-hashtags-tags-btns .tag-btn.active {
    background-color: var(--accent-primary); /* Use primary accent for categories/tags */
    color: var(--bg-primary);
    border-color: var(--accent-primary);
    box-shadow: 0 0 8px rgba(0, 245, 195, 0.4);
}
#add-hashtags-category-btns .category-btn.active:hover,
#add-hashtags-tags-btns .tag-btn.active:hover {
    background-color: var(--accent-primary-dark);
    border-color: var(--accent-primary-dark);
}

#add-hashtags-platform-btns .platform-btn.active {
    background-color: var(--accent-secondary); /* Use secondary accent for platforms */
    color: var(--bg-primary);
    border-color: var(--accent-secondary);
    box-shadow: 0 0 8px rgba(255, 77, 255, 0.4);
}
#add-hashtags-platform-btns .platform-btn.active:hover {
    background-color: var(--accent-secondary-dark);
    border-color: var(--accent-secondary-dark);
}

#add-hashtags-type-btns .type-btn.active {
    background-color: var(--success-color); /* Use another distinct color for type */
    color: var(--bg-primary);
    border-color: var(--success-color);
    box-shadow: 0 0 8px rgba(0, 245, 195, 0.4); /* Can reuse primary accent glow */
}
#add-hashtags-type-btns .type-btn.active:hover {
    background-color: var(--success-color-dark);
    border-color: var(--success-color-dark);
}

#add-hashtags-input {
    width: 100%;
    padding: calc(var(--spacing-unit) * 0.6) calc(var(--spacing-unit) * 0.8);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    font-family: inherit;
    font-size: 0.9375rem;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    resize: vertical;
    min-height: 80px;
    line-height: 1.5;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
#add-hashtags-input:focus {
    border-color: var(--accent-primary);
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 245, 195, 0.3);
}

.modal-footer {
    margin-top: var(--spacing-unit);
    padding-top: var(--spacing-unit);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: flex-end; /* Align button to the right */
}

.submit-captions {
    background: linear-gradient(45deg, var(--accent-secondary), var(--accent-primary)); /* Reversed gradient */
    color: var(--bg-primary);
    border: none;
    padding: calc(var(--spacing-unit) * 0.7) calc(var(--spacing-unit) * 1.5);
    font-size: 1rem;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(255, 77, 255, 0.2), 0 4px 12px rgba(0, 245, 195, 0.2);
}
.submit-captions:hover {
    background: linear-gradient(45deg, var(--accent-secondary-dark), var(--accent-primary-dark));
    box-shadow: 0 6px 18px rgba(255, 77, 255, 0.3), 0 6px 18px rgba(0, 245, 195, 0.3);
     transform: translateY(-1px);
}
.submit-captions:active {
     transform: translateY(0px);
     box-shadow: 0 2px 8px rgba(255, 77, 255, 0.15), 0 2px 8px rgba(0, 245, 195, 0.15);
}

.submit-hashtags { /* Style similarly to submit-captions but maybe different gradient */
    background: linear-gradient(45deg, var(--accent-primary), var(--success-color)); /* Primary + Success */
    color: var(--bg-primary);
    border: none;
    padding: calc(var(--spacing-unit) * 0.7) calc(var(--spacing-unit) * 1.5);
    font-size: 1rem;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(0, 245, 195, 0.2), 0 4px 12px rgba(0, 245, 195, 0.2); /* Using primary accent glow */
}
.submit-hashtags:hover {
    background: linear-gradient(45deg, var(--accent-primary-dark), var(--success-color-dark));
    box-shadow: 0 6px 18px rgba(0, 245, 195, 0.3), 0 6px 18px rgba(0, 245, 195, 0.3);
     transform: translateY(-1px);
}
.submit-hashtags:active {
     transform: translateY(0px);
     box-shadow: 0 2px 8px rgba(0, 245, 195, 0.15), 0 2px 8px rgba(0, 245, 195, 0.15);
}

.toast {
  position: fixed;
  top: 100px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(10, 10, 20, 0.9);  /* deep, rich black-blue */
  color: #fff;
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  backdrop-filter: blur(8px);
  box-shadow: 0 0 12px rgba(0, 255, 255, 1.0);  /* cyan glow */
  z-index: 9999;
  animation: fadeInOut 3s forwards;
}

.toast.error {
  background: rgba(200,0,0,0.9);
}

@keyframes fadeInOut {
  0%,100% { opacity: 0; }
  10%,90% { opacity: 1; }
}

/* Responsive Adjustments */
@media (max-width: 900px) {
    .modal-content {
        width: 90%;
    }
    .caption-filters,
    .hashtag-filters {
        flex-direction: column;
        align-items: stretch;
    }
    .filter-group {
        /* flex-direction: column; */ /* Keep row for label+input */
        /* align-items: stretch; */
        gap: calc(var(--spacing-unit) * 0.4); /* Smaller gap */
    }
    .filter-group label {
        margin-bottom: 0; /* Remove bottom margin if any */
        min-width: 80px; /* Give label some minimum width */
        flex-shrink: 0;
        text-align: left;
    }
    .filter-group select,
    .filter-group input[type="number"] {
        min-width: 0; /* Allow select to shrink */
        flex-grow: 1; /* Allow select to fill space */
    }
    .filter-group input[type="number"] {
        flex-grow: 0; /* Don't let number input grow */
        max-width: 80px; /* Adjust max width */
    }

    #captions-table th.col-caption { width: 40%; }
    #captions-table th.col-identifiers { width: 25%; }
    #captions-table th.col-platforms { width: 20%; }
    #captions-table th.col-char-total { width: 15%; }

    #hashtags-table th:nth-child(1) { width: 30%; }
    #hashtags-table th:nth-child(2) { width: 30%; }
    #hashtags-table th:nth-child(3) { width: 25%; }
    #hashtags-table th:nth-child(4) { width: 15%; }
}

@media (max-width: 768px) {
    body {
        padding: var(--spacing-unit); /* 16px */
    }

    .container {
        gap: var(--spacing-unit); /* 16px */
    }

    section.card, .output-section h2, #output-area {
        padding: var(--spacing-unit); /* 16px */
    }

    .app-header h1 {
        font-size: 2rem; /* 32px */
    }

    section h2 {
        font-size: 1.3rem; /* 21px */
    }

    .button-grid {
        grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
    }

    .setting {
        flex-direction: row; /* Keep row layout */
        align-items: center; /* Center align items */
        gap: calc(var(--spacing-unit) * 0.5); /* Smaller gap */
    }

    .setting label {
        margin-bottom: 0; /* Reset margin */
        flex-grow: 1; /* Allow label to take space */
    }

    .setting input[type="number"] {
        width: 60px; /* Slightly smaller fixed width */
        flex-shrink: 0; /* Prevent shrinking */
    }

    .management-buttons {
        justify-content: center;
        flex-direction: column; /* Stack management buttons */
        align-items: stretch; /* Make buttons full width */
    }

    #output-area.output-grid {
        grid-template-columns: 1fr; /* Stack output cards */
    }

    .action-btn.generate {
         font-size: 1.1rem;
         padding: calc(var(--spacing-unit) * 0.8) calc(var(--spacing-unit) * 1.5);
    }

    .platform-reset-desktop {
      display: none !important;
    }

    .collapsible-section.expanded .platform-reset-mobile {
      display: block;
      margin: 0 auto 1rem auto;
      text-align: center;
    }

    /* On phones, lay out the checkboxes in 3 equal columns */
    .platform-checkbox-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: calc(var(--spacing-unit) * 0.8) calc(var(--spacing-unit) * 1.2);
    }

    #captions-table th, #captions-table td,
    #hashtags-table th, #hashtags-table td {
        font-size: 0.8125rem; /* 13px */
        padding: calc(var(--spacing-unit) * 0.5) calc(var(--spacing-unit) * 0.75); /* ~8px 12px */
    }

    #captions-table th.col-caption, #captions-table td.col-caption { width: auto; } /* Let captions wrap */
    #captions-table th.col-identifiers, #captions-table td.col-identifiers { display: none; } /* Hide less critical columns */
    #captions-table th.col-platforms, #captions-table td.col-platforms { display: none; } /* Hide less critical columns */
    #captions-table th.col-char-total, #captions-table td.col-char-total { width: 15%; text-align: right;} /* Keep char total, right align */

    #hashtags-table th:nth-child(1), #hashtags-table td:nth-child(1) { width: auto; } /* Let hashtags wrap */
    #hashtags-table th:nth-child(2), #hashtags-table td:nth-child(2) { display: none; } /* Hide identifiers */
    #hashtags-table th:nth-child(3), #hashtags-table td:nth-child(3) { display: none; } /* Hide platforms */
    #hashtags-table th:nth-child(4), #hashtags-table td:nth-child(4) { width: 20%; } /* Keep Type */
}

@media (max-width: 480px) {
    .button-grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: calc(var(--spacing-unit) * 0.5);
    }
    .button-row {
        gap: calc(var(--spacing-unit) * 0.5);
    }
    button {
         padding: calc(var(--spacing-unit) * 0.5) calc(var(--spacing-unit) * 0.8);
         font-size: 0.875rem;
    }
    .platform-settings {
        grid-template-columns: 1fr; /* Stack platform settings */
    }
    .setting {
         justify-content: space-between; /* Revert to space-between */
    }
    .setting label {
        flex-grow: 0; /* Reset grow */
    }
    .platform-checkbox-container {
        gap: calc(var(--spacing-unit) * 0.5) calc(var(--spacing-unit) * 0.8); /* Further adjust gap */
    }

    .platform-checkbox-wrapper label {
        font-size: 0.8125rem; /* Slightly smaller label text */
    }

     .platform-checkbox-wrapper input[type="checkbox"] {
         width: 16px;
         height: 16px;
     }
     .platform-checkbox-wrapper input[type="checkbox"]:checked::before {
         top: 1px;
         left: 4px;
         width: 4px;
         height: 8px;
     }

     #captions-table th, #captions-table td,
     #hashtags-table th, #hashtags-table td {
          font-size: 0.75rem; /* Further reduce font size in table */
          padding: calc(var(--spacing-unit) * 0.4) calc(var(--spacing-unit) * 0.6); /* Smaller padding */
     }
     .filter-group label {
          font-size: 0.8125rem; /* Smaller filter label */
          min-width: 70px;
     }
      .filter-group select,
      .filter-group input[type="number"] {
          font-size: 0.8125rem;
      }
      .filter-group input[type="number"] {
         max-width: 60px; /* Adjust max width */
     }
}
